{"remainingRequest":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\thread-loader\\dist\\cjs.js!C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\src\\views\\Localisation.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\src\\views\\Localisation.vue","mtime":1610388792644},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport { nativeAlert } from \"../libs/\";\nimport Loader from \"@/components/Loader\"; // Fix for icon problem with webpack\n// See https://github.com/PaulLeCam/react-leaflet/issues/255#issuecomment-261904061\n\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\nexport default {\n  name: 'localisation',\n  components: {\n    Loader: Loader\n  },\n  data: function data() {\n    return {\n      isLoading: true\n    };\n  },\n  mounted: function mounted() {\n    // Init the leaflet map\n    this.map = L.map('map').setView([47.47121, -0.55198], 5);\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(this.map);\n    this.getUserLocation();\n  },\n  beforeDestroy: function beforeDestroy() {\n    // Destroy the map object on leave\n    if (!(this.map === undefined)) {\n      this.map.remove();\n    }\n  },\n  methods: {\n    stopLoading: function stopLoading() {\n      this.isLoading = false;\n    },\n    getUserLocation: function getUserLocation() {\n      var _this = this;\n\n      // Retrieve the current user location\n      if (navigator.geolocation) {\n        // If the geolocation is available\n        navigator.geolocation.getCurrentPosition(function (position) {\n          // Get the current user position, and create a marker on the map.\n          // Pssst, look at the position object there is a lot of more information\n          var user_position = [position.coords.latitude, position.coords.longitude];\n          L.marker(user_position).addTo(_this.map); // Set the view on the user position at a correct zoom level\n\n          _this.map.setView(user_position, 18);\n\n          _this.stopLoading();\n        }, function () {\n          // If the geolocation plugin not answer or if we reach the timeout\n          _this.stopLoading();\n\n          nativeAlert(_this.$t(\"positionNotAvailable\", _this.$t(\"localisation\")));\n        });\n      } else {\n        // If the browser is not compatible\n        nativeAlert(this.$t(\"positionNotAvailable\", this.$t(\"localisation\")));\n        this.stopLoading();\n      }\n    }\n  }\n};",{"version":3,"sources":["Localisation.vue"],"names":[],"mappings":";;;;;;;;;AAUA,OAAA,0BAAA;AACA,OAAA,CAAA,MAAA,SAAA;AACA,SAAA,WAAA,QAAA,UAAA;AACA,OAAA,MAAA,MAAA,qBAAA,C,CAEA;AACA;;AACA,OAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,SAAA,CAAA,WAAA;AACA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,YAAA,CAAA;AACA,EAAA,aAAA,EAAA,OAAA,CAAA,wCAAA,CADA;AAEA,EAAA,OAAA,EAAA,OAAA,CAAA,qCAAA,CAFA;AAGA,EAAA,SAAA,EAAA,OAAA,CAAA,uCAAA;AAHA,CAAA;AAMA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,MAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,SAAA,EAAA;AADA,KAAA;AAGA,GAPA;AAQA,EAAA,OARA,qBAQA;AACA;AACA,SAAA,GAAA,GAAA,CAAA,CAAA,GAAA,CAAA,KAAA,EAAA,OAAA,CAAA,CAAA,QAAA,EAAA,CAAA,OAAA,CAAA,EAAA,CAAA,CAAA;AACA,IAAA,CAAA,CAAA,SAAA,CAAA,oDAAA,EAAA,KAAA,CAAA,KAAA,GAAA;AACA,SAAA,eAAA;AACA,GAbA;AAcA,EAAA,aAdA,2BAcA;AACA;AACA,QAAA,EAAA,KAAA,GAAA,KAAA,SAAA,CAAA,EAAA;AACA,WAAA,GAAA,CAAA,MAAA;AACA;AACA,GAnBA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,SAAA,GAAA,KAAA;AACA,KAHA;AAIA,IAAA,eAJA,6BAIA;AAAA;;AACA;AACA,UAAA,SAAA,CAAA,WAAA,EAAA;AACA;AACA,QAAA,SAAA,CAAA,WAAA,CAAA,kBAAA,CAAA,UAAA,QAAA,EAAA;AACA;AACA;AACA,cAAA,aAAA,GAAA,CAAA,QAAA,CAAA,MAAA,CAAA,QAAA,EAAA,QAAA,CAAA,MAAA,CAAA,SAAA,CAAA;AACA,UAAA,CAAA,CAAA,MAAA,CAAA,aAAA,EAAA,KAAA,CAAA,KAAA,CAAA,GAAA,EAJA,CAMA;;AACA,UAAA,KAAA,CAAA,GAAA,CAAA,OAAA,CAAA,aAAA,EAAA,EAAA;;AACA,UAAA,KAAA,CAAA,WAAA;AACA,SATA,EASA,YAAA;AACA;AACA,UAAA,KAAA,CAAA,WAAA;;AACA,UAAA,WAAA,CAAA,KAAA,CAAA,EAAA,CAAA,sBAAA,EAAA,KAAA,CAAA,EAAA,CAAA,cAAA,CAAA,CAAA,CAAA;AACA,SAbA;AAcA,OAhBA,MAgBA;AACA;AACA,QAAA,WAAA,CAAA,KAAA,EAAA,CAAA,sBAAA,EAAA,KAAA,EAAA,CAAA,cAAA,CAAA,CAAA,CAAA;AACA,aAAA,WAAA;AACA;AACA;AA3BA;AApBA,CAAA","sourcesContent":["// Require Cordova Plugin : cordova-plugin-geolocation\r\n\r\n<template>\r\n  <v-container fill-height fluid>\r\n    <div id=\"map\"></div>\r\n    <loader v-if=\"isLoading\" />\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\n  import 'leaflet/dist/leaflet.css';\r\n  import L from 'leaflet';\r\n  import {nativeAlert} from \"../libs/\";\r\n  import Loader from \"@/components/Loader\"\r\n\r\n  // Fix for icon problem with webpack\r\n  // See https://github.com/PaulLeCam/react-leaflet/issues/255#issuecomment-261904061\r\n  delete L.Icon.Default.prototype._getIconUrl;\r\n  L.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n  });\r\n\r\n  export default {\r\n    name: 'localisation',\r\n    components: {Loader},\r\n    data() {\r\n      return {\r\n        isLoading: true\r\n      }\r\n    },\r\n    mounted() {\r\n      // Init the leaflet map\r\n      this.map = L.map('map').setView([47.47121, -0.55198], 5);\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(this.map);\r\n      this.getUserLocation();\r\n    },\r\n    beforeDestroy(){\r\n      // Destroy the map object on leave\r\n      if(!(this.map === undefined)){\r\n        this.map.remove();\r\n      }\r\n    },\r\n    methods: {\r\n      stopLoading(){\r\n        this.isLoading = false;\r\n      },\r\n      getUserLocation() {\r\n        // Retrieve the current user location\r\n        if (navigator.geolocation) {\r\n          // If the geolocation is available\r\n          navigator.geolocation.getCurrentPosition((position) => {\r\n            // Get the current user position, and create a marker on the map.\r\n            // Pssst, look at the position object there is a lot of more information\r\n            let user_position = [position.coords.latitude, position.coords.longitude];\r\n            L.marker(user_position).addTo(this.map);\r\n\r\n            // Set the view on the user position at a correct zoom level\r\n            this.map.setView(user_position, 18);\r\n            this.stopLoading();\r\n          }, () => {\r\n            // If the geolocation plugin not answer or if we reach the timeout\r\n            this.stopLoading();\r\n            nativeAlert(this.$t(\"positionNotAvailable\", this.$t(\"localisation\")));\r\n          });\r\n        }else{\r\n          // If the browser is not compatible\r\n          nativeAlert(this.$t(\"positionNotAvailable\", this.$t(\"localisation\")));\r\n          this.stopLoading();\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .container{\r\n    padding: 0;\r\n  }\r\n  #map{\r\n    height: calc(100vh - 50px);\r\n    width: 100%;\r\n    z-index: 1;\r\n  }\r\n\r\n  .loading {\r\n    position: absolute;\r\n    width: 150px;\r\n    height: 150px;\r\n    bottom: 50vh;\r\n    top: 50vh;\r\n    z-index: 200;\r\n    margin: auto;\r\n    background-color: white;\r\n    border-radius: 5px;\r\n    left: calc(50% - 50px);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n    padding: 10px;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/views"}]}