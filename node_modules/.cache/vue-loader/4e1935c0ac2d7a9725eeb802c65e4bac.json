{"remainingRequest":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\src\\views\\Nfc.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\src\\views\\Nfc.vue","mtime":1610388792645},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue-cordova-app\\vuejs-cordova-sample\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {nativeAlert} from \"../libs\";\n\nexport default {\n  name: 'nfc',\n  data(){\n    return {\n      compatible: true,\n      nfc_disabled: false,\n      dialog: false,\n      items: JSON.parse((localStorage.getItem(\"scanHistory\")||\"[]\")),\n    }\n  },\n  watch:{\n    items: function (values) {\n      // Watch push on the items data. If a new item is push save it to the « localStorage ».\n      localStorage.setItem(\"scanHistory\", JSON.stringify(values));\n    }\n  },\n  mounted(){\n    // When the view is mounted, register the scan tag event.\n    this.registerTagEvent();\n  },\n  beforeDestroy(){\n    // When the view is destroyed (user leave), unregister the scan tag event, to avoid scanning tag in other view\n    this.unregisterTagEvent();\n  },\n  methods: {\n    registerTagEvent(){\n      // Unregister previously « resume » event listener.\n      document.removeEventListener(\"resume\", this.registerTagEvent, false);\n\n      if (typeof(nfc) !== \"undefined\"){\n        // Nfc is available, waiting for scan\n        // eslint-disable-next-line\n        nfc.addTagDiscoveredListener(this.displayTagId, this.success, this.error);\n      }else{\n        // Plugin not present or failed to initialized.\n        this.error();\n      }\n    },\n    unregisterTagEvent(){\n      // Test if the plugin is defined\n      if (typeof(nfc) !== \"undefined\") {\n        // eslint-disable-next-line\n        nfc.removeTagDiscoveredListener(this.displayTagId);\n      }\n    },\n    displayTagId(nfcEvent){\n      // Decode tag data from the plugin\n      let tag = nfcEvent.tag;\n      // eslint-disable-next-line\n      let tagId = nfc.bytesToHexString(tag.id);\n\n      // Push the new tag to the saved list\n      this.items.push(tagId);\n\n      // Show the tag Id to the user\n      nativeAlert(this.$t(\"nfcText.tagSerial\") + \" : \" + tagId);\n    },\n    error(e){\n      // Manage the state\n      if(e === \"NFC_DISABLED\"){\n        this.compatible = false;\n        this.nfc_disabled = true;\n      }else{\n        this.nfc_disabled = false;\n        this.compatible = false;\n      }\n    },\n    success(){\n      this.compatible = true;\n      this.nfc_disabled = false;\n    },\n    showSettings(){\n      // Trigger the phone settings to enable the Nfc settings\n      // eslint-disable-next-line\n      nfc.showSettings();\n\n      // To refresh the state of the nfc, we add a listener to the « resume » event.\n      // The resume event is triggered by cordova when the app is « Resumed ».\n      document.addEventListener(\"resume\", this.registerTagEvent, false);\n    }\n  }\n}\n",{"version":3,"sources":["Nfc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Nfc.vue","sourceRoot":"src/views","sourcesContent":["// Require Cordova plugin : phonegap-nfc\r\n// TODO UPDATE\r\n<template>\r\n  <v-container text-center>\r\n      <span v-if=\"compatible\">\r\n        {{$t(\"nfcText.waitingTag\")}}\r\n        <br>\r\n        <v-dialog v-model=\"dialog\" scrollable>\r\n\r\n          <template v-slot:activator=\"{ on }\">\r\n            <v-btn v-on=\"on\">{{$t(\"nfcText.history\")}}</v-btn>\r\n          </template>\r\n\r\n          <v-card>\r\n            <v-card-title>{{$t(\"nfcText.history\")}}</v-card-title>\r\n            <v-divider></v-divider>\r\n            <v-card-text style=\"height: 300px;\">\r\n                <v-list-item v-for=\"item in items\" v-bind:key=\"item\">\r\n                  <v-list-item-content>\r\n                    <v-list-item-title v-text=\"item\"></v-list-item-title>\r\n                  </v-list-item-content>\r\n                </v-list-item>\r\n                <v-list-item v-if=\"items.length === 0\">\r\n                  <v-list-item-content>\r\n                    <v-list-item-title v-text=\"$t('nfcText.noHistory')\" class=\"text-center\"></v-list-item-title>\r\n                  </v-list-item-content>\r\n                </v-list-item>\r\n            </v-card-text>\r\n          </v-card>\r\n          \r\n        </v-dialog>\r\n      </span>\r\n      <v-btn @click=\"showSettings\" v-else-if=\"nfc_disabled\">{{$t(\"nfcText.showSettings\")}}</v-btn>\r\n      <span v-else>{{$t(\"nfcText.notAvailable\")}}</span>\r\n  </v-container>\r\n</template>\r\n\r\n\r\n<script>\r\n  import {nativeAlert} from \"../libs\";\r\n\r\n  export default {\r\n    name: 'nfc',\r\n    data(){\r\n      return {\r\n        compatible: true,\r\n        nfc_disabled: false,\r\n        dialog: false,\r\n        items: JSON.parse((localStorage.getItem(\"scanHistory\")||\"[]\")),\r\n      }\r\n    },\r\n    watch:{\r\n      items: function (values) {\r\n        // Watch push on the items data. If a new item is push save it to the « localStorage ».\r\n        localStorage.setItem(\"scanHistory\", JSON.stringify(values));\r\n      }\r\n    },\r\n    mounted(){\r\n      // When the view is mounted, register the scan tag event.\r\n      this.registerTagEvent();\r\n    },\r\n    beforeDestroy(){\r\n      // When the view is destroyed (user leave), unregister the scan tag event, to avoid scanning tag in other view\r\n      this.unregisterTagEvent();\r\n    },\r\n    methods: {\r\n      registerTagEvent(){\r\n        // Unregister previously « resume » event listener.\r\n        document.removeEventListener(\"resume\", this.registerTagEvent, false);\r\n\r\n        if (typeof(nfc) !== \"undefined\"){\r\n          // Nfc is available, waiting for scan\r\n          // eslint-disable-next-line\r\n          nfc.addTagDiscoveredListener(this.displayTagId, this.success, this.error);\r\n        }else{\r\n          // Plugin not present or failed to initialized.\r\n          this.error();\r\n        }\r\n      },\r\n      unregisterTagEvent(){\r\n        // Test if the plugin is defined\r\n        if (typeof(nfc) !== \"undefined\") {\r\n          // eslint-disable-next-line\r\n          nfc.removeTagDiscoveredListener(this.displayTagId);\r\n        }\r\n      },\r\n      displayTagId(nfcEvent){\r\n        // Decode tag data from the plugin\r\n        let tag = nfcEvent.tag;\r\n        // eslint-disable-next-line\r\n        let tagId = nfc.bytesToHexString(tag.id);\r\n\r\n        // Push the new tag to the saved list\r\n        this.items.push(tagId);\r\n\r\n        // Show the tag Id to the user\r\n        nativeAlert(this.$t(\"nfcText.tagSerial\") + \" : \" + tagId);\r\n      },\r\n      error(e){\r\n        // Manage the state\r\n        if(e === \"NFC_DISABLED\"){\r\n          this.compatible = false;\r\n          this.nfc_disabled = true;\r\n        }else{\r\n          this.nfc_disabled = false;\r\n          this.compatible = false;\r\n        }\r\n      },\r\n      success(){\r\n        this.compatible = true;\r\n        this.nfc_disabled = false;\r\n      },\r\n      showSettings(){\r\n        // Trigger the phone settings to enable the Nfc settings\r\n        // eslint-disable-next-line\r\n        nfc.showSettings();\r\n\r\n        // To refresh the state of the nfc, we add a listener to the « resume » event.\r\n        // The resume event is triggered by cordova when the app is « Resumed ».\r\n        document.addEventListener(\"resume\", this.registerTagEvent, false);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n"]}]}